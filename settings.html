<div id="openrouter-randomizer-settings" class="inline-drawer">
    <div class="inline-drawer-toggle inline-drawer-header">
        <b>OpenRouter Randomizer</b>
        <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down"></div>
    </div>
    <div class="inline-drawer-content">
        <div class="openrouter-randomizer-block">
            <div class="toggle-description">
                <label class="checkbox_label" for="openrouter-randomizer-enabled">
                    <input id="openrouter-randomizer-enabled" type="checkbox" />
                    <span>Enable OpenRouter Model Randomizer</span>
                </label>
            </div>
            
            <div class="openrouter-settings-group">
                <small class="notes">Randomly selects a model from your chosen list for each generation to help avoid repeating patterns and phrases before they happen.</small>
                <small class="notes">Uses your OpenRouter API key from API Connections settings.</small>
            </div>
            
            <div class="openrouter-settings-group">
                <div id="last-used-model-display" style="background: var(--SmartThemeBlurTintColor, rgba(0, 0, 0, 0.05)); border-radius: 4px; padding: 8px; margin: 10px 0; display: none;">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                        <div style="flex: 1;">
                            <strong>Last Used Model:</strong>
                            <span id="last-used-model-name" style="color: var(--SmartThemeEmColor, #4c9eff); margin-left: 8px;">None</span>
                            <br>
                            <small id="last-used-model-time" style="color: var(--SmartThemeQuoteColor, #888); margin-top: 4px; display: block;">Never used</small>
                        </div>
                        <button id="block-last-model-btn" class="menu_button" style="margin-left: 10px; font-size: 12px; padding: 4px 8px;" title="Block this model from future selections">Block</button>
                    </div>
                    <div id="blocked-models-info" style="margin-top: 8px; padding-top: 8px; border-top: 1px solid var(--SmartThemeBorderColor, #444); display: none;">
                        <small style="color: var(--SmartThemeQuoteColor, #888);">
                            <strong>Blocked models:</strong> <span id="blocked-models-list">None</span>
                        </small>
                        <button id="clear-blocked-btn" class="menu_button" style="font-size: 11px; padding: 2px 6px; margin-left: 8px;" title="Clear all blocked models">Clear All</button>
                    </div>
                </div>
            </div>
            
            <div class="openrouter-models-section">
                <h4>Available Models</h4>
                <div class="model-controls" style="margin-bottom: 10px; display: none;">
                    <div style="margin-bottom: 10px;">
                        <input type="text" id="model-search" placeholder="🔍 Search models (e.g., gpt-4, mistral, claude...)" 
                               style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; background: var(--SmartThemeBodyColor, #222); color: var(--SmartThemeEmColor, #fff); border-color: var(--SmartThemeBorderColor, #ccc);">
                    </div>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <button id="select-all-btn" class="menu_button">Select All</button>
                        <button id="deselect-all-btn" class="menu_button">Deselect All</button>
                        <button id="select-free-btn" class="menu_button" title="Select only free models">Select Free Only</button>
                    </div>
                </div>
                <div id="model-list-container" class="model-list-container">
                    <p>Click "Fetch Models" to load available models.</p>
                </div>
            </div>
        </div>
    </div>
</div>